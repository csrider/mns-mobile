var versionInfoForJavascriptFile_winDoc={version:"1.8",build:"2015.06.01"};var globStrIframeID;var overrideIframeWindowMethod_close_orig;var overrideIframeWindowMethod_open_orig;function overrideIframeWindowMethod_close(strIframeID){if(typeof strIframeID==="undefined"){FavScreen.log("error","overrideIframeWindowMethod_close(): required strIframeID wasn't specified. Aborting.",true);return false;}globStrIframeID=strIframeID;var node_iframe=document.getElementById(strIframeID);if(node_iframe===null){FavScreen.log("error","overrideIframeWindowMethod_close(): strIframeID ('"+strIframeID+"') not found in the document. Aborting.",true);return false;}var win_iframe=node_iframe.contentWindow;if(typeof win_iframe!=="object"){FavScreen.log("error","overrideIframeWindowMethod_close(): no valid window object exists for '"+strIframeID+"'). Aborting.",true);return false;}overrideIframeWindowMethod_close_orig=win_iframe.close;win_iframe.close=function(){parent.FavScreen.log("log","An iframe ('"+parent.globStrIframeID+"') document has invoked an overridden (overrideIframeWIndowMethod_close) window.close method.",false);parent.Popup.hide();};FavScreen.log("log","overrideIframeWindowMethod_close(): Finished specifying the override of window.close() for the iframe window, '"+strIframeID+"'.",true);return true;}function overrideIframeWindowMethod_open(strIframeID){if(typeof strIframeID==="undefined"){FavScreen.log("error","overrideIframeWindowMethod_open(): required strIframeID wasn't specified. Aborting.",true);return false;}globStrIframeID=strIframeID;var node_iframe=document.getElementById(strIframeID);if(node_iframe===null){FavScreen.log("error","overrideIframeWindowMethod_open(): strIframeID ('"+strIframeID+"') not found in the document. Aborting.",true);return false;}var win_iframe=node_iframe.contentWindow;if(typeof win_iframe!=="object"){FavScreen.log("error","overrideIframeWindowMethod_open(): no valid window object exists for '"+strIframeID+"'). Aborting.",true);return false;}overrideIframeWindowMethod_open_orig=win_iframe.open;win_iframe.open=function(strUrl,strName,strParams){parent.FavScreen.log("log","An iframe ('"+parent.globStrIframeID+"') document has invoked an overridden (overrideIframeWIndowMethod_open) window.open method.",false);var objWin=new Object;objWin.strUrl=strUrl;objWin.strName=strName;objWin.strParams=strParams;objWin.document=document.implementation.createHTMLDocument("popupDoc");objWin.document.close=function(){parent.FavScreen.set("objPopupDocument",this);};parent.FavScreen.set("objPopupOpener",this.window);parent.FavScreen.set("objPopupWindow",objWin);return objWin;};FavScreen.log("log","overrideIframeWindowMethod_open(): Finished specifying the override of window.open() for the iframe window, '"+strIframeID+"'.",true);return true;}function replaceDocumentContentsToResolveMsg(strHTML){if(strHTML==="undefined"){FavScreen.log("error","replaceDocumentContentsToResolveMsg() requires a complete document represented by a string of HTML. Aborting.",true);return false;}var node_iframe=document.createElement("iframe");node_iframe.id="iframe_toResolveMsg";node_iframe.src="about:blank";node_iframe.border=0;node_iframe.style.border=0;node_iframe.width="100%";node_iframe.height=(window.innerHeight-55)+"px";var node_bodywrapper=document.getElementById("bodywrapper");FavScreen.node_bodywrapper=node_bodywrapper.cloneNode(true);node_bodywrapper.innerHTML=null;node_bodywrapper.appendChild(node_iframe);var objDocument=node_iframe.contentWindow.document||node_iframe.contentDocument;try{objDocument.open();objDocument.write(strHTML);objDocument.close();}catch(err){FavScreen.log("error","replaceDocumentContentsToResolveMsg(): Server returned invalid document code ("+err+"). Aborting and restoring original content.",true);node_bodywrapper.innerHTML=null;node_bodywrapper.appendChild(FavScreen.node_bodywrapper);FavScreen.node_bodywrapper=null;node_iframe=null;return false;}objDocument.body.style.zoom=FavScreen.get("attrZoom");return node_iframe;}function restoreSavedNode_fromLegacyIframe(){Spinner.show();var delay=500;FavScreen.log("log","restoreSavedNode_fromLegacyIframe(): Called and will execute in "+delay+"ms.",true);setTimeout(function(){if(FavScreen.node_bodywrapper===null){return FavScreen.log("info","restoreSavedNode_fromLegacyIframe(): No saved bodywrapper node to restore (it may have already been restored). Aborting.",true);}FavScreen.log("log","restoreSavedNode_fromLegacyIframe(): Now executing restoration...",true);var node_bodywrapper=document.getElementById("bodywrapper");node_bodywrapper.parentNode.replaceChild(FavScreen.node_bodywrapper,node_bodywrapper);FavScreen.set("attrLastFocused_window",Date.now());FavScreen.node_bodywrapper=null;iframeHandle=undefined;FavScreen.log("log","restoreSavedNode_fromLegacyIframe(): Saved bodywrapper node has been restored and nullified.",true);if(FavScreen.get("attrInteractionMode")==MODE_REPLYING){switch(FavScreen.get("attrCurrentResponseRule")){case ENCODED_RESPONSE_RULE_2:window.FavScreen.set("attrInteractionMode",MODE_LAUNCHABLE);break;case ENCODED_RESPONSE_RULE_3:window.updateScreenStyle({newVal:MODE_REPLYING});window.jumpScrollTo("libraryAnchor_"+FAVS_LIB_USER_STDREPLIES_PIN.trim());attachActionListenersToMessageCells_allSubsectionsInSection("subsectionlist-libraries");return;default:break;}}window.scrollTo_animated(document.body,FavScreen.get("attrCurrentScrollPositionPixelY"),150);refreshRecordset(CURRENT_USER_PIN,true,false,false);refreshRecordset_inboxMsgs(CURRENT_USER_PIN,true,false);loadLibsAndMsgs();setTimeout(function(){MajorSection_personalLibs.renderListInItsSection();},1000);FavScreen.log("log","restoreSavedNode_fromLegacyIframe(): Completed.",true);},delay);}function replaceDocumentContentsToViewMessage(strHTML){if(strHTML==="undefined"){FavScreen.log("error","replaceDocumentContentsToViewMessage() requires a complete document represented by a string of HTML. Aborting.",true);return false;}var node_iframe=document.createElement("iframe");node_iframe.id="iframe_toViewMsg";node_iframe.src="about:blank";node_iframe.border=0;node_iframe.style.border=0;node_iframe.width="100%";node_iframe.height=(window.innerHeight-55)+"px";var node_bodywrapper=document.getElementById("bodywrapper");FavScreen.node_bodywrapper=node_bodywrapper.cloneNode(true);node_bodywrapper.innerHTML=null;node_bodywrapper.appendChild(node_iframe);var node_iframeDocument=node_iframe.contentWindow.document||node_iframe.contentDocument;node_iframeDocument.write(strHTML);node_iframeDocument.body.style.zoom=FavScreen.get("attrZoom");return node_iframe;}function restoreSavedNode_fromViewMsg(){var node_bodywrapper=document.getElementById("bodywrapper");node_bodywrapper.parentNode.replaceChild(FavScreen.node_bodywrapper,node_bodywrapper);FavScreen.node_bodywrapper=null;iframeHandle=undefined;refreshRecordset(CURRENT_USER_PIN,false,false,false);refreshRecordset_inboxMsgs(CURRENT_USER_PIN,false,false);loadLibsAndMsgs();window.scrollTo(0,FavScreen.get("attrCurrentScrollPositionPixelY"));FavScreen.set("attrLastFocused_window",Date.now());window.focus();}